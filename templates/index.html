{% extends 'base.html' %}

{% block head %}
<title>üìù Your Task Manager</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Roboto', sans-serif;
        background-color: #ffffff; /* ÂÖ®ÁôΩÂ∫ïËâ≤ */
        color: #333;
        text-align: center; /* Â∞áÂÖßÂÆπÁΩÆ‰∏≠ */
    }

    h1 {
        margin: 20px 0;
        color: #333;
    }

    .content {
        display: inline-block; /* ‰ΩøÂÖßÂÆπÂçÄÂüüÂèØ‰ª•ÁΩÆ‰∏≠ */
    }

    table {
        width: 80%; /* Â¢ûÂä†Ë°®Ê†ºÂØ¨Â∫¶ */
        margin: 20px auto; /* Â∞áË°®Ê†ºÁΩÆ‰∏≠ */
        border-collapse: collapse;
        background-color: #fff; /* Á¢∫‰øùËÉåÊôØÁÇ∫ÁôΩËâ≤ */
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    th, td {
        padding: 12px;
        text-align: center;
        border-bottom: 1px solid #ddd;
    }

    th {
        background-color: #4CAF50;
        color: white;
    }

    tr:hover {
        background-color: #f1f1f1;
    }

    .button-85 {
        background: linear-gradient(45deg, #ff0000, #ff7300);
        border-radius: 5px;
        color: white;
        padding: 10px 20px;
        border: none;
        cursor: pointer;
        transition: background 0.3s;
    }

    .button-85:hover {
        background: linear-gradient(45deg, #ff7300, #ff0000);
    }

    .checkbox-wrapper-19 {
        display: inline-block; /* ‰øùÁïôÂéüÊúâÊïàÊûú */
    }
</style>
{% endblock %}

{% block body %}
<div class="content">
    <h1>Task Manager</h1>
    <img src="{{ url_for('static', filename='pic/multitasking_pic.avif') }}" class="center" style="max-width: 80%; height: auto;">

    {% if tasks|length < 1 %}
    <h4>There are no tasks. Create one below!</h4>
    {% else %}
    <table>
        <tr>
            <th>Completed</th>
            <th>Task</th>
            <th>Added</th>
            <th>Delete</th>
            <th>Update</th>
        </tr>

        <style>
            .checkbox-wrapper-19 {
              box-sizing: border-box;
              --background-color: #fff;
              --checkbox-height: 25px;
            }
          
            @-moz-keyframes dothabottomcheck-19 {
              0% {
                height: 0;
              }
              100% {
                height: calc(var(--checkbox-height) / 2);
              }
            }
          
            @-webkit-keyframes dothabottomcheck-19 {
              0% {
                height: 0;
              }
              100% {
                height: calc(var(--checkbox-height) / 2);
              }
            }
          
            @keyframes dothabottomcheck-19 {
              0% {
                height: 0;
              }
              100% {
                height: calc(var(--checkbox-height) / 2);
              }
            }
          
            @keyframes dothatopcheck-19 {
              0% {
                height: 0;
              }
              50% {
                height: 0;
              }
              100% {
                height: calc(var(--checkbox-height) * 1.2);
              }
            }
          
            @-webkit-keyframes dothatopcheck-19 {
              0% {
                height: 0;
              }
              50% {
                height: 0;
              }
              100% {
                height: calc(var(--checkbox-height) * 1.2);
              }
            }
          
            @-moz-keyframes dothatopcheck-19 {
              0% {
                height: 0;
              }
              50% {
                height: 0;
              }
              100% {
                height: calc(var(--checkbox-height) * 1.2);
              }
            }
          
            .checkbox-wrapper-19 input[type=checkbox] {
              display: none;
            }
          
            .checkbox-wrapper-19 .check-box {
              height: var(--checkbox-height);
              width: var(--checkbox-height);
              background-color: transparent;
              border: calc(var(--checkbox-height) * .1) solid #000;
              border-radius: 5px;
              position: relative;
              display: inline-block;
              -moz-box-sizing: border-box;
              -webkit-box-sizing: border-box;
              box-sizing: border-box;
              -moz-transition: border-color ease 0.2s;
              -o-transition: border-color ease 0.2s;
              -webkit-transition: border-color ease 0.2s;
              transition: border-color ease 0.2s;
              cursor: pointer;
            }
            .checkbox-wrapper-19 .check-box::before,
            .checkbox-wrapper-19 .check-box::after {
              -moz-box-sizing: border-box;
              -webkit-box-sizing: border-box;
              box-sizing: border-box;
              position: absolute;
              height: 0;
              width: calc(var(--checkbox-height) * .2);
              background-color: #34b93d;
              display: inline-block;
              -moz-transform-origin: left top;
              -ms-transform-origin: left top;
              -o-transform-origin: left top;
              -webkit-transform-origin: left top;
              transform-origin: left top;
              border-radius: 5px;
              content: " ";
              -webkit-transition: opacity ease 0.5;
              -moz-transition: opacity ease 0.5;
              transition: opacity ease 0.5;
            }
            .checkbox-wrapper-19 .check-box::before {
              top: calc(var(--checkbox-height) * .72);
              left: calc(var(--checkbox-height) * .41);
              box-shadow: 0 0 0 calc(var(--checkbox-height) * .05) var(--background-color);
              -moz-transform: rotate(-135deg);
              -ms-transform: rotate(-135deg);
              -o-transform: rotate(-135deg);
              -webkit-transform: rotate(-135deg);
              transform: rotate(-135deg);
            }
            .checkbox-wrapper-19 .check-box::after {
              top: calc(var(--checkbox-height) * .37);
              left: calc(var(--checkbox-height) * .05);
              -moz-transform: rotate(-45deg);
              -ms-transform: rotate(-45deg);
              -o-transform: rotate(-45deg);
              -webkit-transform: rotate(-45deg);
              transform: rotate(-45deg);
            }
          
            .checkbox-wrapper-19 input[type=checkbox]:checked + .check-box,
            .checkbox-wrapper-19 .check-box.checked {
              border-color: #34b93d;
            }
            .checkbox-wrapper-19 input[type=checkbox]:checked + .check-box::after,
            .checkbox-wrapper-19 .check-box.checked::after {
              height: calc(var(--checkbox-height) / 2);
              -moz-animation: dothabottomcheck-19 0.2s ease 0s forwards;
              -o-animation: dothabottomcheck-19 0.2s ease 0s forwards;
              -webkit-animation: dothabottomcheck-19 0.2s ease 0s forwards;
              animation: dothabottomcheck-19 0.2s ease 0s forwards;
            }
            .checkbox-wrapper-19 input[type=checkbox]:checked + .check-box::before,
            .checkbox-wrapper-19 .check-box.checked::before {
              height: calc(var(--checkbox-height) * 1.2);
              -moz-animation: dothatopcheck-19 0.4s ease 0s forwards;
              -o-animation: dothatopcheck-19 0.4s ease 0s forwards;
              -webkit-animation: dothatopcheck-19 0.4s ease 0s forwards;
              animation: dothatopcheck-19 0.4s ease 0s forwards;
            }
        </style>

        {% for task in tasks %}
        <tr>
            <td>
                <form action="{{ url_for('toggle_complete', id=task.id) }}" method="POST" style="display:inline;">
                    <div class="checkbox-wrapper-19">
                        <input type="checkbox" id="cb-{{ task.id }}" onclick="this.form.submit()" {% if task.completed %}checked{% endif %} />
                        <label for="cb-{{ task.id }}" class="check-box"></label>
                    </div>
                </form>
            </td>
            <td style="width: 80%; {% if task.completed %}text-decoration: line-through;{% endif %}">{{ task.content }}</td>
            <td>{{ task.date_created.date() }}</td>
            <td>
                <a href="/delete/{{task.id}}">
                    <button class="button-85">Delete</button>
                </a>
            </td>
            <td>
                <a href="/update/{{task.id}}">
                    <button class="button-85">Update</button>
                </a>
            </td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}

    <form style="text-align: center;" action="/" method="POST">
        <input type="text" name="content" id="content" placeholder="Add a new task" required>
        <input type="submit" value="Add" class="button-85">
    </form>
</div>
{% endblock %}
